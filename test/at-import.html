<!DOCTYPE html>
<script type="importmap">
  {
    "imports": {
      "style-scoped": "../dist/scoped.min.js",
      "node:assert": "https://esm.sh/assert"
    }
  }
</script>

<div>
  <style scoped id="scoped">
    @import url("data:text/css,p { color: red; }");
  </style>

  <p id="red">I should be red.</p>
</div>
<p id="black">I should be black.</p>

<script type="module">
  import "style-scoped";
  import assert from "node:assert";

  const style = document.querySelector("#scoped");
  const red = document.querySelector("#red");
  const black = document.querySelector("#black");

  assert.equal(style.scoped, true);
  assert.equal(getComputedStyle(red).color, "rgb(255, 0, 0)");
  assert.equal(getComputedStyle(black).color, "rgb(0, 0, 0)");
</script>
